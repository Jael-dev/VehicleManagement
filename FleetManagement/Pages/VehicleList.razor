@page "/vehiclelist"
@using System.Globalization
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<VehicleList> Localizer

<h3>@Localizer["HelloBlaz"]</h3>

<button class="btn btn-primary" @onclick="AddVehicle">Add Vehicle</button> 

<Modal @ref=@modalRef>

    <ModalContent Size="ModalSize.Large" >
        <ModalHeader>
            <ModalTitle>Add Vehicle</ModalTitle>
        </ModalHeader>

        @* <div class="top-row">
            
        </div> *@

        <ModalBody>
            <EditForm Model="@Vehicle" OnValidSubmit="SaveVehicle" FormName="Add Vehicle">
                <DataAnnotationsValidator />
                <Microsoft.AspNetCore.Components.Forms.ValidationSummary />
                <Field>
                    <FieldLabel for="Licence">Licence plate</FieldLabel>
                    <FieldBody>
                        <InputText Class="form-control" @bind-Value="Vehicle.LicensePlate" id="LicensePlate" />
                        <ValidationMessage For="@(() => Vehicle.LicensePlate)" />
                    </FieldBody>
                </Field>
                <Field>
                    <FieldLabel for="Model">Model</FieldLabel>
                    <FieldBody>
                        <Select Class="form-control" TValue="int" @bind-Value="Vehicle.Car" id="Brand">
                            @foreach (var car in Cars)
                            {
                                <option value="@car.Id">@car.Model</option>
                            }
                        </Select>
                    </FieldBody>
                </Field>
                <Field>
                    <FieldLabel for="Brand">Brand</FieldLabel>
                    <FieldBody>
                        <Select Class="form-control" TValue="int" @bind-Value="Vehicle.Car" id="Brand">
                            @foreach (var brand in Brands)
                            {
                                <option value="@brand.Id">@brand.BrandName</option>
                            }
                        </Select>
                    </FieldBody>
                </Field>

                <Field>
                    <FieldLabel for="Year">Year</FieldLabel>
                    <FieldBody>
                        <InputNumber Class="form-control" @bind-Value="Vehicle.Year" id="Year" />
                        <ValidationMessage For="@(() => Vehicle.Year)" />
                    </FieldBody>
                </Field>
                <Field>
                    <FieldLabel for="Mileage">Mileage</FieldLabel>
                    <FieldBody>
                        <InputNumber Class="form-control" @bind-Value="Vehicle.Mileage" id="Mileage" />
                        <ValidationMessage For="@(() => Vehicle.Mileage)" />
                    </FieldBody>
                </Field>
                <button class="btn-primary form-control" type="submit">Save</button>
            </EditForm>
        </ModalBody>

    </ModalContent>

</Modal>

<FleetManagement.Components.VehicleListComponent/>
